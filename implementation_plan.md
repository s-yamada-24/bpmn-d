# BPMN 2.0 エディタ開発計画

## フェーズ1: デザインとセットアップ
- [x] UIデザインモックアップの作成
- [x] **最終デザインのユーザー承認**
- [x] プロジェクト構造の初期化 (index.html, styles.css, app.js)

## フェーズ2: コアUIの実装
- [x] レイアウトの実装 (ヘッダー, サイドバー, キャンバス, プロパティパネル)
- [x] **フィードバックに基づくUI調整:**
    - [x] ログインアイコンとメニューボタンの削除
    - [x] 左上に「図面名」入力フィールドを追加
    - [x] 汎用的なズームテキストを「現在のズームレベル」表示に変更
    - [x] **コンパクトなアイコンのみのパレットの実装**
    - [x] **BPMNエクスプローラー(図の階層ツリー)の実装**
- [x] 「グラスモーフィズム」とダークモードスタイルの適用
- [x] ドラッグ可能なアイコンを持つツールパレットの作成

## フェーズ3: キャンバスとインタラクションロジック
- [x] リサイズ可能なサイドバーの実装(左右)
- [x] キャンバス上のドロップゾーンの実装
- [x] BPMN要素のレンダリングロジック作成 (SVG/Canvas)
- [x] ドラッグ＆ドロップ機能の実装
- [x] 要素の選択と移動の実装

## フェーズ4: BPMN機能の拡張
- [ ] **高度なプロパティとデータ管理**
    - [ ] **汎用プロパティ**: 全要素に「メモ」テキストエリアを追加。
    - [ ] **タイプ固有のプロパティ**:
        - タスク: タスクタイプ(ユーザー、サービス、スクリプト等)、優先度、担当者。
        - イベント: シグナル/メッセージ定義、タイマー設定。
        - ゲートウェイ: シーケンスフローの条件式。
- [ ] **入出力要素(データオブジェクト)**
    - [ ] パレットに **データ入力 (Data Input)** と **データ出力 (Data Output)** 要素を追加。
    - [ ] データオブジェクトの描画実装(ドキュメントアイコンと矢印)。
    - [ ] **データ関連付け (Data Association)** 接続の実装(点線)。
- [ ] **階層的BPMN(サブプロセス)**
    - [ ] **データ構造**: 複数の図(ルート + 子)をサポートするように状態管理をリファクタリング。
    - [ ] **UI統合**:
        - アクティビティ(タスク)のプロパティに「サブプロセスを編集」ボタンを追加。
        - **BPMNエクスプローラー** を更新して、図の階層構造(ツリービュー)を可視化。
    - [ ] **ナビゲーション**:
        - 「サブプロセスを編集」クリックで、キャンバスを子図面に切り替え。
        - エクスプローラーのツリー項目クリックでキャンバスを切り替え。
        - 親に戻るための「パンくずリスト」または「上へ」ナビゲーションのサポート。

## フェーズ5: 保存とエクスポート
- [x] **JSON保存(プロジェクト保存)**
    - [x] 階層的な図とプロパティを含むプロジェクト全体の保存・読み込み。
- [x] **BPMN 2.0 XML エクスポート**
    - [x] 準拠したXMLのエクスポート(`bpmn:subProcess` または個別の図としての処理)。
- [x] **画像エクスポート**
    - [x] 現在のキャンバス表示を PNG/SVG としてエクスポート。
    - [x] SVG形式は完全実装済み
    - [ ] PNG形式はhtml2canvasライブラリ追加で動作可能
